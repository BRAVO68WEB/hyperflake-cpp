<h1  align="center"  style="border-bottom: none;">❄️ Hyperflake </h1>

<h3  align="center">A simple and lightweight C++ module to generate unique snowflake like IDs starting from beginning of the 21th century. </h3>

<br  />

<p  align="center">

<a  href="https://github.com/BRAVO68WEB/hyperflake-cpp/actions/workflows/test.yml">

<img  alt="Build states"  src="https://github.com/BRAVO68WEB/hyperflake-cpp/actions/workflows/test.yml/badge.svg?branch=main">

</a>

<p  align="center">
<a  href="https://github.com/BRAVO68WEB/hyperflake-cpp/issues/new">Bug report</a>
</p>

<hr  />

`hyperflake-cpp` is a C++ library for generating unique and distributed IDs that are suitable for use as primary keys in distributed systems.

It generates 64-bit IDs (in string format) that are composed of a timestamp, a worker ID, and a sequence number. These IDs are based on [Twitter's Snowflake ID](https://github.com/twitter-archive/snowflake/tree/snowflake-2010) generation algorithm.

## Installation 🚀

You can install `hyperflake-cpp` cloning the repository adding to your project:

```cpp
#include "hyperflake.hpp"
```

## Methods 🧮

The SnowflakeId instance has the following methods:

- `generate()`: Generates a unique ID in string format.
- `decode()`: Retrive timestamp when the ID was generated.

## Usage 💻

Here's an example of how to use `hyperflake-cpp`:

```cpp
#include "hyperflake.hpp"

using namespace std;
using namespace chrono;

int main(){
    Hyperflake hf;

    long long id = hf.generate();
    cout << "ID: " << id << endl;  // ID: 3273974649684016911

    return 0;
}
```

This will generate a unique ID in string format.

## Validating IDs ✅

You can decode IDs generated by `hyperflake` using the `decode()` method:

```cpp
#include "hyperflake.hpp"

using namespace std;
using namespace chrono;

int main(){
    Hyperflake hf;
    
    long long id = hf.generate();
    cout << "ID: " << id << endl; // ID: 3273974649684016911

    long epoch = hf.decode(id);
    cout << "Time since epoch: " << epoch << endl; // Time since epoch: 1727261183992

    return 0;
}
```

This will return the timestamp when the ID was generated.

Also you can head to [https://hyperflake-validator-ui.vercel.app](https://hyperflake-validator-ui.vercel.app) to decode your IDs using a simple Web UI.

## Error Handling 😱

The SnowflakeId instance throws an error if the clock moves backwards, i.e., if the current timestamp is less than the last timestamp.

This can happen if the system clock is adjusted manually or if the system clock drifts significantly.

If this happens, the library throws an Error with the message `Clock is moving backwards!`.

## Examples 🔠

Here's an example of how to generate 10 IDs:

```cpp
#include "hyperflake.hpp"
#include <iostream>

using namespace std;
using namespace chrono;

int main(){
    Hyperflake hf;

    for (int i = 0; i < 10; i++) {
        long long id = hf.generate();
        cout << "ID: " << id << endl;
        cout << "Time since epoch: " << hf.decode(id) << endl;
    }

    return 0;
}
```

## Bugs or Requests 🐛

If you encounter any problems feel free to open an [issue](https://github.com/bravo68web/hyperflake-cpp/issues/new) on GitHub.